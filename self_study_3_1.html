<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ìˆ«ìì•¼êµ¬</title>
</head>
<body>
    <form id="form">
        <input type="text" id="input" maxlength="4" placeholder="ìˆ«ì 4ìë¦¬ ì…ë ¥">
        <button>í™•ì¸</button>
    </form>
    <div id="logs"></div>

    <script>
        const $input = document.querySelector('#input'); 
        //inputíƒœê·¸
        const $form = document.querySelector('#form'); 
        //form íƒœê·¸
        const $logs = document.querySelector('#logs');
        //logs íƒœê·¸ê·¸
        const tries = [];

        // 1ë¶€í„° 9ê¹Œì§€ ë°°ì—´ ìƒì„±
        const numbers = []; 
        for (let n = 0; n < 9; n++) { //number = [1,2,3,4,5,6,7,8,9]
            numbers.push(n + 1);
        }

        // ì¤‘ë³µ ì—†ì´ 4ìë¦¬ ì •ë‹µ ìƒì„±
        const answer = [];
        for (let n = 0; n < 4; n++) {
            const index = Math.floor(Math.random() * numbers.length); //index = [1,2,3,4]
            answer.push(numbers[index]); //answer = [numbersì—ì„œ ë½‘ì€ì€ 4ìë¦¬ ìˆ«ì psuh]
            numbers.splice(index, 1); //numbersì—ì„œ ë½‘íŒ ìˆ«ì ì œì™¸
        }
        console.log('ì •ë‹µ:', answer);

        // ì…ë ¥ ê²€ì‚¬ í•¨ìˆ˜
        function checkInput(input) {
            if (input.length !== 4) { // 4ìë¦¬ ìˆ«ìë¡œ ë§Œë“¤ì—ˆëŠ”ê°€
                alert('4ìë¦¬ ìˆ«ìë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”.');
                return false;
            }
            if (new Set(input).size !== 4) { //4ìë¦¬ê°€ ì¤‘ë³µëœ ìˆ«ìë¥¼ ê°€ì§€ê³  ìˆëŠ”ê°€
                alert('ìˆ«ìê°€ ì¤‘ë³µë˜ì§€ ì•Šê²Œ ì…ë ¥í•´ì£¼ì„¸ìš”.');
                return false;
            }
            if (tries.includes(input)) { // ì´ì „ì— ì‹œë„í–ˆë˜ ìˆ«ìì¸ê°€
                alert('ì´ë¯¸ ì‹œë„í•œ ê°’ì…ë‹ˆë‹¤.');
                return false;
            }
            return true;
        }

        // ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ
        $form.addEventListener('submit', (event) => {
            event.preventDefault(); //submitì„ ëˆŒëŸ¬ë„ ìƒˆë¡œê³ ì¹¨í•˜ì§€ ì•ŠìŒìŒ
            const value = $input.value;
            $input.value = '';

            if (!checkInput(value)) return;
            tries.push(value);

            let strike = 0;
            let ball = 0;

            for (let i = 0; i < 4; i++) {
                if (Number(value[i]) === answer[i]) {
                    strike++;
                } else if (answer.includes(Number(value[i]))) {
                    ball++;
                }
            }

            $logs.innerHTML += `${value}: ${strike} ìŠ¤íŠ¸ë¼ì´í¬ ${ball} ë³¼<br>`;

            if (strike === 4) {
                $logs.innerHTML += `<strong>ğŸ‰ í™ˆëŸ°! ì •ë‹µì€ ${answer.join('')}ì…ë‹ˆë‹¤.</strong>`; //join ì‚¬ìš©í•˜ëŠ” ì´ìœ : [4, 7, 1, 9] ë°°ì—´ì„ 4719 ë¬¸ìì—´ë¡œ ë°”ê¿€ ìˆ˜ ìˆìŒ.
                    
            }

            if (tries.length >= 10 && strike < 4) {
                $logs.innerHTML += `<strong>ğŸ’€ ì‹¤íŒ¨! ì •ë‹µì€ ${answer.join('')}ì…ë‹ˆë‹¤.</strong>`;
                $input.disabled = true;
            }
        });
    </script>
</body>
</html>
